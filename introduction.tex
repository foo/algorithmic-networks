\indent
In the last decade, we witnessed a growing demand to perform large-scale
computations, such as protein folding, fluid dynamics, weather and market prediction, or production process optimization.
The scale of such computations exceedes abilities of a single computer, hence computations need to be performed on large sets of machines that cooperate over interconnecting network, collectively called the \emph{computer cluster}.
Owning and maintaing large-scale computing infrastructure is often impractical and expensive, and parties look for alternative ways to perform computations.
In comparison, outsourcing computations provides a wide range of benefits.
First of all, it mitigates the costs of infrastructure management and maintenance.
This is crucial especially for computational tasks that arise occasionally, such as high-quality rendering, computer verification of products with long development time or analysis of human-harvested data.
Second, such approach dismisses the need to foresee the appropriate demand for resources.
If the demand for resources increases unexpectedly, it can be immediately provided without physical extension of the infrastructure.
This led to shift of computations to large-scale \emph{remote} facilites that contain computer clusters with their support infrastructure, the so-called \emph{data centers}.
Performing computations in these external data centers provide the impression of unlimited computational power on demand is called the \emph{cloud computing}.

The demand for outsourcing computations to the cloud created a whole market for such services.
Modern processing power suppliers such as Microsoft Azure \cite{url-azure}, Amazon Elastic Cloud Computing EC2 \cite{url-amazon-ec2} or Google Compute Engine \cite{url-gce} provide convenient on-demand computational power while hiding most of details concerning resource management.
Processing capabilities are quickly and conveniently accessible for every interested party.

Computational tasks require multiple types of resources to complete: CPU time, memory, I/O operations and network bandwith.
Demand for these resources often vary in time and is unpredictable.
For this reason, the data center that performs \emph{just one task at the time} are doomed to waste resources.
However, the co-existence of multiple tasks in the data center allows to compensate for the variable demand for resources by resource-aware scheduling.
Such techniques are especially useful in (but not limited to) computationally-intensive applications, where the response time is not the primary concern.

This thesis assumes the perspective of a data center owner, whose main goal is an \emph{efficient management of resources}.
For example, processing speed can scale down to save energy, memory can be shared or distributed, and cooperating processes can migrate closer in the network to save bandwidth.
In this thesis we focus on \emph{efficient usage of interconnecting network} in a data center.
Optimization of this resource is critical to perform efficient large-scale computations, as those involve multiple machines that cooperate over network.

To perform any type of optimization, we need the possibility to alter certain aspects of the task operation.
Generally such alternations are transparent, which means that those preserve the semantics of a computation.
With wide range of possible alternations, we can provide better optimization techniques.
In this thesis, we make use of a sophisticated control system, called a \emph{virtualization}, which is a subject of the following section.

\section{Machine virtualization}

Techniques presented in this thesis rely upon logical isolation of a computation from the physical machine that performs the computation.
This gives a possibility to manage the physical placement of a computation in a way that is transparent to the computation.
A particular piece of technology that provided the flexibility in placement of computations is \emph{virtualization}.

Virtualization provides an abstraction layer for the underlying hardware of a computer system, called the \emph{virtual machine}.
Virtual machine mimics functionality of the physical hardware so closely and
directly that it can be used as an environment for a complete operating system.
Such operating system, running on a virtual machine is called the \emph{guest
operating system}. It operates in additon to the \emph{host operating
system}, which operates directly on the physical hardware. 

There are several mature virtualization solutions for data center usage: Xen
\cite{url-xen}, KVM \cite{url-kvm}, Hyper-V \cite{url-hyperv}, VMware ESXi
\cite{url-vmware}. The perspective of the guest
operating system is restricted to such exposed virtual machine and is provided
with an illusion of possesing the whole computer system. The main features of
virtualization in datacenter is \emph{to provide the complete and
non-restricted environment} for the client that is isolated from the management
software and other clients' tasks.

Besides providing an abstraction layer, virtualization provides several control features.
Absolute control over the underlying, virtual hardware of the guest operating system allows to suspend and resume the execution of the guest operating system at will.
Such functionality provides building blocks for the feature of \emph{migration}, which transfers the complete virtual machine to a different physical machine.
Migration of a running virtual machine without shutting it down is called the \emph{teleportation}, and provides a powerful resource-management tool that is transparent to clients.
Such mechanisms play an important role in load balancing in the data center and allows for sophisticated optimizations such as reducing network distance between communicating virtual machines.

Data center consists of multiple virtual machines running on physical nodes
that are connected by a physical network. Single virtual machine often provides
insufficient resources for the client, as its resources are limited by resources
available to its host. Data centers provide its resources to clients as a set
of virtual machines connected by a network. The network that connects virtual
machines is restricted and controlled in similar manner to hardware
virtualization, and is called a \emph{virtual network}. Cooperating virtual
machines are often refered to as a \emph{nodes} of a virtual network. To
guarantee certain quality of service (\emph{QoS}), up-front bandwidth
reservations are a requisite. However, the generality of performed calculations
results in unpredictibility of communication patterns and poses a challenge in
optimization of bandwidth reservations.

Virtualization allows
flexibility in renting infrastructure, and might offer savings in resource
management. However, efficient use of resources requires sophisticated
techniques to achieve its goal. In this thesis, we focus on using the tools
provided by modern virtualization techologies for efficient usage of important
resource in the data center -- the network bandwidth. Problem central to this
thesis is stated as follows:

\begin{center}
  \emph{How to assign virtual machines to physical machines to optimize network
  usage?}
\end{center}

We elaborate more in subsequent subsection.

\section{Algorithmic aspects of the virtual machines embedding}

To state optimization problems, we model certain aspects of data center operation.
Physical components of a data center are often modelled in form of a graph called a \emph{substrate network}, in which vertices correspond to \emph{physical machines}, and edges correspond to \emph{interconnecting network}.
Communication cost between pair of physical machines is proportional to edge-distance in substrate network (the number of \emph{hops} in the substrate network).
Communication pattern among virtual machines is also modelled as a graph, called a \emph{communication graph}.
In such settings, the communication among virtual machines running on certain physical machines is modelled as a \emph{graph embedding} of communication graph into a substrate network.
In optimization of network usage, the objective function is the total cost of such embedding, measured in size of multiset of used edges of the host graph.

In this thesis we consider substrate networks in form of a tree, which models closely the popular topology of a Fat-Tree, but fails to approximate some sophisticated topologies such as a Butterfly Topology.
In the tree topology, we distinguish a specific class of physical machines that cannot host virtual machines, and their sole role is to transmit communication patterns.
Machines that are able to host virtual machines are placed in leaves of the substrate graph.
Figure \ref{fig:tree-topology} presents an example of tree topology graph.


\begin{figure}[th]
\centering
\includegraphics[width=0.79\columnwidth]{figs/tree-topology.pdf}
\caption{The model of typical data center.}\label{fig:tree-topology}
\vspace{-1em}
\end{figure}

\section{Algorithmics aspects of network optimization}

TODO Tree Caching

\section{Trash}


\maciek{To zdanie tu nie pasuje, ale chetnie bym o tym gdzies napisal}
This is intertwined with a multitude of problems and requirements: security in resource-sharing scenarios, standarization and compatibility, automation, availability, extensibility and modularity, recovery, and many more.

This computational paradigm shift is strongly connected with the advancements 
in the underlying computational infrastructure, both in hardware and in software. 
The processing capabilities of data centers 
would not be possible without improvements in
task isolation, resource sharing and transparent concurrency.
\todo{To prawda, ale bardziej zależy nam na ułatwieniu samej optymalizacji zasobów}


\section{Contributions of this thesis and thesis organization}

In this thesis we consider two scenarios regarding virtual machines embeddings:
\begin{enumerate}
  \item \emph{The static scenario}, where virtual machines are irrevocably assigned to their physical machines at the moment of creation of virtual nodes
  \item \emph{The dynamic scenario}, where virtual machines can migrate between physical machines
\end{enumerate}

In both scenarios we assume that the communication pattern among virtual nodes is not known.
The static scenario, to guarantee certain quality of service (\emph{QoS}), we need to acquire network reservations for \emph{all} possible communication patterns among cooperating virtual machines.
The combinatorial problem that we consider in the static scenario is essentially the minimum-cost embedding of a clique in a tree, enriched by certain extensions motivated by Map-Reduce applications.
On the other hand, in the dynamic scenario, we rearrange the placement of virtual nodes in reply to changes in communication pattern.
The migration cost and the communication costs need to be balanced, effectively stating a variant the classic online \emph{rent-or-buy} scenario.

\subsection{Contributions on Static Mapping}

In Part I, we study the data-locality and replica aware virtual network embedding problems in datacenters.
The model we consider is a variant of graph embedding problem, where the host graph is a tree, and a guest graph consists of union of a clique and a matching.
We consider the wide range of possible extensions that model certain aspects of Map-Reduce applications, most notably:

\begin{itemize}
\item \emph{Data chunk processing}. In Map-Reduce applications, set of virtual machines processes large amounts of data that are stored in distributed file system. Each chunk of data must be assigned and transferred to a virtual machine. Data chunk transfer requires its own network reservations.

\item \emph{Data chunk replication}. Distributed file systems often store redundant copies of data chunks, called \emph{chunk replicas}. Only one copy of each data chunk replica must be processed, and we are free to choose the replica based on its placement.

\item \emph{Bandwidth constraints}. Each link in substrate network has its capacity. For the embedding to be feasible, the total network reservations has to obey link capacities.
\end{itemize}


In particular, we decompose the general optimization problem into its fundamental aspects, such as
assignment of chunks, replica selection, and flexible virtual machine
placement, and answer questions such as:
\begin{enumerate}
\item Which chunks to assign to which virtual machine?

\item How to exploit redundancy and select good replicas?

\item How to efficiently embed virtual machines and their inter-connecting network?

\item Can the chunk assignment, replica selection and virtual machine embedding problems be jointly optimized, in polynomial time?
\end{enumerate}

We draw a complete picture of the problem space: we show that
even problem variants exhibiting multiple degrees of freedom in terms of
replica selection and embedding,
can be solved optimally in polynomial time, and we present several efficient
algorithms accordingly. However, we also prove limitations in terms of
computational tractability, by providing reductions from 3-D matching
and Boolean satisfiability ($\SAT$). Interestingly,
while it is well-known that (unsplittable) multi-commodity flow
problems are NP-hard in capacitated networks, our hardness results also hold in \emph{uncapacitated}
networks; moreover, we show that NP-hard problems already arise in small-diameter networks (as they are
widely used today~\cite{fattree}).

\newpage

\subsection{Contributions on Dynamic Mapping}

The model we consider is a variant of online graph clustering.
Certain assumptions such as 1-level tree. Hierarchical structure modeled by hosting multiple vms on one pm.
Competitive analysis.

\subsection{Contributions on Memory Management in Network Devices}

\todo{braaap}

\subsection{Performance metrics}


\maciek{Propose that this subsection is not needed. Methods of measuring the quality of results is already stated in contributions on static matching (for time and space)}

Methods of Measuring the Quality of Results

\emph{Online Algorithms and Competitive Analysis}

Sleator, Tarjan: list update \cite{competitive-analysis}
Borodin book \cite{borodin-book}

\emph{Time and Space Complexity and NP-completeness}


\section{Related Work}

\input{related-work}



\section{Bibliographic notes}

Parts of this thesis were co-published by the author of this thesis in the following conferences and journals: ICNP TODOCITE, ACM SPAA TODOCITE, DISC TODOCITE and Journal of Theoretical Computer Science TODOCITE.
In addition, parts of this thesis were published in Alexandra Spyra's master thesis and Carlo Fuerst's doctorial thesis.